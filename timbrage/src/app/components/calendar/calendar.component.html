<mat-card fxLayout="column" class="mat-elevation-z0">
    <mat-card-header fxFlex="60" class="mat-elevation-z1" *ngIf="selected$ | async as selected">
        <div>
            <div class="month" fxLayout="row" fxLayoutAlign="space-around center">
                <div class="prev" (click)="changeMonth(-1)" fxFlex="0 1 20px">&#10094;</div>
                <div>{{selected.format('MMMM')}}<span class="year" fxFlex="4 1 auto">{{selected.format('YYYY')}}</span></div>
                <div class="next" (click)="changeMonth(+1)" fxFlex="0 1 20px">&#10095;</div>
            </div>

            <div class="weekdays" fxLayout="row wrap" fxLayoutAlign="space-around center">
                <div *ngFor="let weekDay of weekDays" fxFlex="13.6" fxLayoutAlign="center">{{weekDay}}</div>
            </div>

            <div class="days" fxLayout="row wrap" fxLayoutAlign="space-around center">
                <ng-container *ngFor="let day of days$ | async">
                    <div *ngIf="selected.month() === day.date.month(); else readOnly"
                         [class.active]="selected.format('YYYYMMDD') === day.date.format('YYYYMMDD')"
                         [class.with-times]="day.hasTimes"
                         (click)="select(day.date)" fxFlex="13.6" fxLayoutAlign="center"
                    >
                        {{day.date.date()}}
                    </div>
                    <ng-template #readOnly>
                        <div class="inactive" fxFlex="13.6" fxLayoutAlign="center">{{day.date.date()}}</div>
                    </ng-template>
                </ng-container>
            </div>
        </div>
        <mat-card-actions>
            <button id="add" (click)="addTimbrage()" mat-mini-fab color="accent">
                <mat-icon>add</mat-icon>
            </button>
        </mat-card-actions>
    </mat-card-header>

    <mat-card-content fxFlexFill fxLayout="column">
        <ng-container *ngIf="(loading$ | async) === true;else timeList">
            <div>Loading</div>
        </ng-container>
        <ng-template #timeList>
            <div id="sumDay" fxFlex="row" fxLayoutAlign="start center">
                <span>{{ sumDay$ | async }}</span>
            </div>
            <app-time *ngFor="let time of (times$ | async)" [model]="time"></app-time>
        </ng-template>
    </mat-card-content>
</mat-card>
